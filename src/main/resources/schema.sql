CREATE TABLE IF NOT EXISTS ORGANIZATION(
  id INTEGER PRIMARY KEY AUTO_INCREMENT NOT NULL,
  version INTEGER NOT NULL,
  name VARCHAR(30) UNIQUE NOT NULL,
  full_name VARCHAR(50) UNIQUE NOT NULL,
  inn VARCHAR(20) UNIQUE NOT NULL,
  kpp VARCHAR(20) UNIQUE NOT NULL,
  address VARCHAR(255) NOT NULL,
  phone VARCHAR(20),
  is_active BOOLEAN
  );

CREATE TABLE IF NOT EXISTS Office(
  id INTEGER PRIMARY KEY AUTO_INCREMENT NOT NULL,
  version INTEGER NOT NULL,
  org_id INTEGER NOT NULL,
  name VARCHAR(30) UNIQUE NOT NULL,
  address VARCHAR(255) NOT NULL,
  phone VARCHAR(20),
  is_active BOOLEAN NOT NULL
  );

CREATE TABLE IF NOT EXISTS User(
  id INTEGER PRIMARY KEY AUTO_INCREMENT NOT NULL,
  version INTEGER NOT NULL,
  office_id INTEGER NOT NULL,
  first_name VARCHAR(50) NOT NULL,
  second_name VARCHAR(50) NOT NULL,
  middle_name VARCHAR(50),
  position VARCHAR(50) NOT NULL,
  doc_code INTEGER ,
  doc_number VARCHAR(50) UNIQUE ,
  doc_date DATE,
  citizenship_code INTEGER,
  is_identified BOOLEAN NOT NULL
  );

CREATE TABLE IF NOT EXISTS Document(
  id INTEGER PRIMARY KEY NOT NULL,
  name VARCHAR(255) NOT NULL
  );

CREATE TABLE IF NOT EXISTS CITIZENSHIP(
  id INTEGER PRIMARY KEY NOT NULL,
  name VARCHAR(255) NOT NULL
  );

CREATE INDEX IX_OFFICE_ORG_ID ON OFFICE(ORG_ID);
ALTER TABLE OFFICE ADD FOREIGN KEY (ORG_ID) REFERENCES ORGANIZATION(ID);

CREATE INDEX IX_USER_OFFICE_ID ON USER(OFFICE_ID);
ALTER TABLE USER ADD FOREIGN KEY (OFFICE_ID) REFERENCES OFFICE(ID);

CREATE INDEX IX_USER_DOCUMENT_CODE ON USER(DOC_CODE);
ALTER TABLE USER ADD FOREIGN KEY (DOC_CODE) REFERENCES DOCUMENT(ID);

CREATE INDEX IX_USER_CITIZENSHIP_CODE ON USER(CITIZENSHIP_CODE);
ALTER TABLE USER ADD FOREIGN KEY (CITIZENSHIP_CODE) REFERENCES CITIZENSHIP(ID);